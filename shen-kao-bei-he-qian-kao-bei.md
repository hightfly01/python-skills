# 深拷贝、浅拷贝 {#深拷贝、浅拷贝}

### 1. 浅拷贝 {#1-浅拷贝}

* 浅拷贝是对于一个对象的顶层拷贝

通俗的理解是：拷贝了引用，并没有拷贝内容

```
In [2]: a = [1,2,3]

In [3]: b = a # 浅拷贝

In [4]: id(a)
Out[4]: 4397907592

In [5]: id(b)
Out[5]: 4397907592

In [6]: a.append(4)

In [7]: a
Out[7]: [1, 2, 3, 4]

In [8]: b
Out[8]: [1, 2, 3, 4]
```

强调说明：

**b = a 实际上就是浅拷贝，就是把a的引用地址拷贝给b, 因此 a 引用的地址和 b引用的地址是同一个。所以，在修改a里面的内容，同时b中内容也随之变化。**

## 2. 深拷贝 {#2-深拷贝}

深拷贝是对于一个对象所有层次的拷贝\(递归\)

如1：

```
In [7]: a
Out[7]: [1, 2, 3, 4]


In [9]: import copy

In [10]: c = copy.deepcopy(a) # 深拷贝a给c

In [11]: c
Out[11]: [1, 2, 3, 4]

In [12]: id(a)
Out[12]: 4397907592  # a的地址

In [13]: id(c)
Out[13]: 4397821192  # c的地址

In [14]: a.append(5) # 修改a中内容

In [15]: a
Out[15]: [1, 2, 3, 4, 5]

In [16]: c           # c内容没有影响
Out[16]: [1, 2, 3, 4]

In [17]:
```

如2:

```
In [23]: a = [11,22,33]

In [24]: b = [44,55,66]

In [25]: c = (a,b) # c元组列表

In [26]: e = copy.deepcopy(c) # 深拷贝c给e

In [27]: a.append(77) # 修改a的内容

In [28]: a
Out[28]: [11, 22, 33, 77]

In [29]: b
Out[29]: [44, 55, 66]

In [30]: c
Out[30]: ([11, 22, 33, 77], [44, 55, 66]) # c内容发生变化

In [31]: e
Out[31]: ([11, 22, 33], [44, 55, 66]) # e的内容并没有发生变化
```

强调说明：

```
c = copy.deepcopy(a) 深拷贝a给c ,此时，将a的内容拷贝一份给c，并且在内存中新建一份地址分配给c。
因此，id(a) 和 id(c)在内存中的地址不同.修改a的内容，不会影响c的内容
```

## 3. copy.copy\(\)和copy.deepcopy\(\)区别 {#2-深拷贝}

**copy.copy\(\)方法特点：**

如果拷贝的对象是不可变类型\(如：元组\)，进行浅拷贝

如果拷贝的对象是可变类型\(如：列表\)，进行深拷贝

如：使用copy\(\)方法实现浅拷贝：

```
In [95]: a = (11,22,33) # a对象为不可变类型

In [96]: b = copy.copy(a) # 浅拷贝

In [97]: id(a)   # a地址
Out[97]: 58890680

In [98]: id(b)   # b地址  a 和 b的引用执行同一个地址
Out[98]: 58890680
```

如：使用copy方法实现深拷贝：

```
In [20]: import copy

In [21]: a = [1,2] # a对象为可变类型

In [22]: b = copy.copy(a) # 深拷贝a给b

In [23]: b
Out[23]: [1, 2]

In [24]: id(a)
Out[24]: 4397059144

In [25]: id(b)        # 给b分配新的地址
Out[25]: 4403664328

In [26]: a.append(3)  # 修改a的值

In [27]: a
Out[27]: [1, 2, 3]


In [29]: b           # b的值没有发生变化
Out[29]: [1, 2]
```

**copy.deepcopy\(\)方法的特点：**

如果拷贝的对象是可变类型，进行深拷贝。

如果拷贝的对象是不可变类型，进行深拷贝。



